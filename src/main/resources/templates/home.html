<!doctype html>
<html class="h-100" lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <style>
      .text-green {
        color: var(--bs-green);
      }

      .text-red {
        color: var(--bs-red);
      }

      .animate-pulse {
        animation: pulse 2s cubic-bezier(.4,0,.6,1) infinite;
      }

      @keyframes pulse {
        50% {
          opacity: .5;
        }
      }

    </style>

    <title th:text="${name}"></title>
    <script defer src="https://unpkg.com/alpinejs@3.7.1/dist/cdn.min.js"></script>
  </head>

  <body class="d-flex h-100 justify-content-center align-items-center text-center text-white bg-dark">
    <main x-data="main" x-init="updateStatus">
      <h1><span th:text="${name}"></span>目前<span
          :class="status ? (status.online ? 'text-green' : 'text-red') : 'animate-pulse'"
          x-text="status ? (status.online ? '在线' : '离线') : '⋯⋯'">⋯⋯</span></h1>
      <hr>
      <pre th:text="${host}"></pre>
    </main>

    <script>
      document.addEventListener('alpine:init', () => {
        Alpine.data('main', () => ({
          status: null,

          async updateStatus() {
            this.status = await fetch('/status').then(response => response.json());
            setTimeout(() => this.updateStatus(), 10 * 1000);
          }
        }))
      })
    </script>
  </body>
</html>
